{"version":3,"sources":["webpack:///webpack/bootstrap daec3e64dc93cb74779d","webpack:///./src/ts/ui/game.ts","webpack:///./src/ts/core/toolkit.ts","webpack:///./src/ts/main.ts","webpack:///./src/ts/core/local.ts","webpack:///./src/ts/ui/squareFactory.ts","webpack:///./src/ts/core/square.ts","webpack:///./src/ts/core/remote.ts"],"names":["Object","defineProperty","exports","value","squareFactory_1","require","toolkit_1","square_1","Game","user","_user","_speed","_score","_start","_gameOver","$","text","_gameMatrix","default","matrix","makeMatrix","_nextMatrix","_currentSquare","nextMatrix","build","refreshGame","status","left","right","leftWall","rightWall","forEach","rV","rI","cV","cI","checkDown","y","x","checkClear","refresh","done","refreshNext","_gameSquare","_nextSquare","val","result","next","turnMatrix","matrixObj","has_done","score_count","done_count","count","splice","unshift","makeRow","win","lose","show","shift","arr","Array","from","length","Math","random","push","console","log","setInterval","down","bool","Toolkit","MatrixToolkit","v","l","fill","l1","l2","_matrix","w","h","map","local_1","remote_1","local","remote","time","floor","game_1","Local","_game","init","loop","bindEvent","document","on","gameover","e","keyCode","currentSquare","turn","drop","bindStart","id","addClass","start","SquareFactory","$contain","_contain","row","rowIndex","rowDiv","col","colIndex","colDiv","css","top","removeClass","append","div","find","Square","_x","_y","createMatrix","game","checkTurn","_leftWall","_rightWall","matrixes","able"],"mappings":"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","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 2);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap daec3e64dc93cb74779d","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst squareFactory_1 = require(\"./squareFactory\");\r\nconst toolkit_1 = require(\"../core/toolkit\");\r\nconst square_1 = require(\"../core/square\");\r\n/**\r\n * 生成游戏解决方案\r\n */\r\nclass Game {\r\n    constructor(user) {\r\n        this._user = user;\r\n        this._speed = 1000;\r\n    }\r\n    get currentSquare() {\r\n        return this._currentSquare;\r\n    }\r\n    get gameover() {\r\n        return this._gameOver;\r\n    }\r\n    set start(bool) {\r\n        this._start = bool;\r\n    }\r\n    /**\r\n     * 初始化游戏\r\n     */\r\n    init() {\r\n        this._score = 0;\r\n        this._start = false;\r\n        this._gameOver = false;\r\n        $('#score-' + this._user).text(this._score);\r\n        this._gameMatrix = toolkit_1.default.matrix.makeMatrix(0, 10, 20);\r\n        this._nextMatrix = toolkit_1.default.matrix.makeMatrix(1, 4, 4);\r\n        this._currentSquare = new square_1.default();\r\n        this._nextMatrix = this._currentSquare.nextMatrix;\r\n        this.build();\r\n        this.refreshGame();\r\n    }\r\n    /**\r\n     * 刷新主体\r\n     */\r\n    refreshGame() {\r\n        let status = 1;\r\n        let left = 3; //方块最左侧位置\r\n        let right = 0; //方块最右侧位置\r\n        this._currentSquare.leftWall = false;\r\n        this._currentSquare.rightWall = false;\r\n        //重置面板\r\n        this._gameMatrix.forEach((rV, rI) => rV.forEach((cV, cI) => {\r\n            if (cV === 1) {\r\n                this._gameMatrix[rI][cI] = 0;\r\n            }\r\n        }));\r\n        if (!this.checkDown()) {\r\n            status = 2;\r\n        }\r\n        //渲染方块所在位置\r\n        this._currentSquare.matrix.forEach((rV, rI) => {\r\n            rV.forEach((cV, cI) => {\r\n                if (cV) {\r\n                    if (this._gameMatrix[this._currentSquare.y + rI]) {\r\n                        this._gameMatrix[this._currentSquare.y + rI][this._currentSquare.x + cI] = status;\r\n                    }\r\n                    right = cI > right ? cI : right;\r\n                    left = cI < left ? cI : left;\r\n                    //监测是否出界\r\n                    if ((this._gameMatrix[this._currentSquare.y + rI] &&\r\n                        this._gameMatrix[this._currentSquare.y + rI][this._currentSquare.x + cI - 1] &&\r\n                        this._gameMatrix[this._currentSquare.y + rI][this._currentSquare.x + cI - 1] === 2) ||\r\n                        this._currentSquare.x + left <= 0) {\r\n                        this._currentSquare.leftWall = true;\r\n                    }\r\n                    if ((this._gameMatrix[this._currentSquare.y + rI] &&\r\n                        this._gameMatrix[this._currentSquare.y + rI][this._currentSquare.x + cI + 1] &&\r\n                        this._gameMatrix[this._currentSquare.y + rI][this._currentSquare.x + cI + 1] === 2) ||\r\n                        this._currentSquare.x + right >= 9) {\r\n                        this._currentSquare.rightWall = true;\r\n                    }\r\n                }\r\n            });\r\n        });\r\n        this.checkClear();\r\n        this.refresh(1);\r\n        if (status === 2) {\r\n            this._currentSquare.done();\r\n            this.refreshNext(this._currentSquare.nextMatrix);\r\n        }\r\n    }\r\n    /**\r\n     * 刷新预览\r\n     * @param {number[][]} nextMatrix\r\n     */\r\n    refreshNext(nextMatrix) {\r\n        this._nextMatrix = nextMatrix;\r\n        this.refresh(2);\r\n    }\r\n    /**\r\n     * 生成dom\r\n     */\r\n    build() {\r\n        this._gameSquare = new squareFactory_1.default(this._gameMatrix, $('#panel-' + this._user));\r\n        this._gameSquare.build();\r\n        this._nextSquare = new squareFactory_1.default(this._nextMatrix, $('#next-' + this._user));\r\n        this._nextSquare.build();\r\n    }\r\n    /**\r\n     * 刷新dom\r\n     * @param {number} val\r\n     */\r\n    refresh(val) {\r\n        if (val === 1) {\r\n            this._gameSquare.refresh(this._gameMatrix);\r\n        }\r\n        else {\r\n            this._nextSquare.refresh(this._nextMatrix);\r\n        }\r\n    }\r\n    /**\r\n     * 检测是否可以下降\r\n     * @returns {boolean}\r\n     */\r\n    checkDown() {\r\n        //判断下一行是否到底或者有方块\r\n        let result = true;\r\n        this._currentSquare.matrix.forEach((rV, rI) => {\r\n            rV.forEach((cV, cI) => {\r\n                if (!!cV) {\r\n                    const next = this._gameMatrix[this._currentSquare.y + rI + 1] ? this._gameMatrix[this._currentSquare.y + rI + 1][this._currentSquare.x + cI] : -1;\r\n                    if (next === 2 || next === -1) {\r\n                        result = false;\r\n                    }\r\n                }\r\n            });\r\n        });\r\n        return result;\r\n    }\r\n    /**\r\n     * 检测是否可以旋转\r\n     * @returns {boolean}\r\n     */\r\n    checkTurn() {\r\n        const matrix = toolkit_1.default.matrix.turnMatrix(this._currentSquare.matrixObj);\r\n        let left = 3; //方块最左侧位置\r\n        let right = 0; //方块最右侧位置\r\n        let has_done = false; //旁边是否有done\r\n        matrix.matrix.forEach((rV, rI) => {\r\n            rV.forEach((cV, cI) => {\r\n                if (cV) {\r\n                    right = cI > right ? cI : right;\r\n                    left = cI < left ? cI : left;\r\n                }\r\n                if (this._gameMatrix[this._currentSquare.y + rI] &&\r\n                    this._gameMatrix[this._currentSquare.y + rI][this._currentSquare.x + cI] &&\r\n                    this._gameMatrix[this._currentSquare.y + rI][this._currentSquare.x + cI] === 2) {\r\n                    has_done = true;\r\n                }\r\n            });\r\n        });\r\n        //根据是否可以旋转返回矩阵\r\n        if (this._currentSquare.x + left <= 0 || this._currentSquare.x + right >= 9 || has_done) {\r\n            return this._currentSquare.matrixObj;\r\n        }\r\n        else {\r\n            return matrix;\r\n        }\r\n    }\r\n    /**\r\n     *  检测消除\r\n     */\r\n    checkClear() {\r\n        let score_count = 0;\r\n        let done_count = 0;\r\n        this._gameMatrix.forEach((rV, rI) => {\r\n            let count = 0;\r\n            rV.forEach((cV, cI) => {\r\n                if (cV === 2) {\r\n                    count++;\r\n                }\r\n            });\r\n            if (count === 10) {\r\n                score_count++;\r\n                this._gameMatrix.splice(rI, 1);\r\n                this._gameMatrix.unshift(toolkit_1.default.matrix.makeRow(0, 10));\r\n            }\r\n            if (count >= 1) {\r\n                done_count++;\r\n            }\r\n        });\r\n        //判断得分\r\n        switch (score_count) {\r\n            case 1:\r\n                this._score += 10;\r\n                break;\r\n            case 2:\r\n                this._score += 30;\r\n                break;\r\n            case 3:\r\n                this._score += 60;\r\n                break;\r\n            case 4:\r\n                this._score += 100;\r\n                break;\r\n        }\r\n        if (this._score >= 2000) {\r\n            this._gameOver = true;\r\n            this.win();\r\n        }\r\n        //TODO 给对方加速\r\n        //判断游戏结束\r\n        if (done_count >= 20) {\r\n            this._gameOver = true;\r\n            this.lose();\r\n        }\r\n        $('#score-' + this._user).text(this._score);\r\n    }\r\n    /**\r\n     * 失败\r\n     */\r\n    lose() {\r\n        $(\"#lose\").show();\r\n    }\r\n    /**\r\n     * 胜利\r\n     */\r\n    win() {\r\n        $(\"#win\").show();\r\n    }\r\n    /**\r\n     * 干扰\r\n     */\r\n    disturb() {\r\n        this._gameMatrix.shift();\r\n        const arr = Array.from({ length: 10 }, () => Math.random() > 0.5 ? 0 : 2);\r\n        this._gameMatrix.push(arr);\r\n        console.log(arr);\r\n    }\r\n    /**\r\n     * 循环游戏\r\n     */\r\n    loop() {\r\n        setInterval(() => {\r\n            if (!this._gameOver && this._start) {\r\n                this.refreshGame();\r\n                this._currentSquare.down();\r\n            }\r\n        }, this._speed);\r\n    }\r\n}\r\nexports.Game = Game;\r\nexports.default = Game;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/ts/ui/game.ts","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nclass Toolkit {\r\n    static get matrix() {\r\n        return MatrixToolkit;\r\n    }\r\n}\r\nexports.Toolkit = Toolkit;\r\n/**\r\n * 生成矩阵工具类\r\n * @type {{}}\r\n */\r\nconst MatrixToolkit = {\r\n    /**\r\n     * 生成一维数组工具\r\n     * @param {number} v  值\r\n     * @param {number} l  长度\r\n     * @returns {number[]}\r\n     */\r\n    makeRow(v = 0, l = 10) {\r\n        const arr = new Array(l);\r\n        arr.fill(v);\r\n        return arr;\r\n    },\r\n    /**\r\n     * 生成二位数组矩阵工具\r\n     * @param {number} v 值\r\n     * @param {number} l1 横向长度\r\n     * @param {number} l2 纵向长度\r\n     * @returns {number[][]}\r\n     */\r\n    makeMatrix(v = 0, l1 = 10, l2 = 20) {\r\n        // const arr = new Array(l2);\r\n        // arr.map(value => this.makeRow(v,l1));\r\n        const arr = Array.from({ length: l2 }, () => this.makeRow(v, l1));\r\n        return arr;\r\n    },\r\n    /**\r\n     * 矩阵顺时针旋转90°解决方案\r\n     * @param {number[][]} matrix\r\n     * @returns {number[][]}\r\n     */\r\n    turnMatrix(matrix) {\r\n        let _matrix = {\r\n            matrix: this.makeMatrix(0, 4, 4),\r\n            w: 0,\r\n            h: 0\r\n        };\r\n        _matrix.matrix = _matrix.matrix.map((rV, rI) => rV.map((cV, cI) => matrix.matrix[3 - cI][rI]));\r\n        _matrix.w = matrix.h;\r\n        _matrix.h = matrix.w;\r\n        return _matrix;\r\n    }\r\n};\r\nexports.default = Toolkit;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/ts/core/toolkit.ts","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst local_1 = require(\"./core/local\");\r\nconst remote_1 = require(\"./core/remote\");\r\nconst local = new local_1.default();\r\nconst remote = new remote_1.default();\r\nlet time = 0;\r\nsetInterval(() => {\r\n    time++;\r\n    $('#m').text(Math.floor(time / 60) < 10 ? '0' + Math.floor(time / 60) : Math.floor(time / 60));\r\n    $('#s').text(time % 60 < 10 ? '0' + time % 60 : time % 60);\r\n    // if(time % 3 === 0) {\r\n    //     local.game.disturb();\r\n    // }\r\n}, 1000);\r\n$('#prepare').show();\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/ts/main.ts","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst game_1 = require(\"../ui/game\");\r\nclass Local {\r\n    constructor() {\r\n        this._game = new game_1.default('local');\r\n        this._game.init();\r\n        this._game.loop();\r\n        this.bindEvent();\r\n    }\r\n    get game() {\r\n        return this._game;\r\n    }\r\n    /**\r\n     * 绑定键盘事件\r\n     */\r\n    bindEvent() {\r\n        $(document).on('keydown', e => {\r\n            if (this._game.gameover) {\r\n                return;\r\n            }\r\n            if (e.keyCode === 38) {\r\n                this._game.currentSquare.turn(this._game);\r\n            }\r\n            else if (e.keyCode === 37) {\r\n                this._game.currentSquare.left();\r\n            }\r\n            else if (e.keyCode === 39) {\r\n                this._game.currentSquare.right();\r\n            }\r\n            else if (e.keyCode === 40) {\r\n                this._game.currentSquare.down();\r\n            }\r\n            else if (e.keyCode === 32) {\r\n                this._game.currentSquare.drop(this._game);\r\n            }\r\n            this._game.refreshGame();\r\n        });\r\n        this.bindStart('start');\r\n        this.bindStart('win-again');\r\n        this.bindStart('lose-again');\r\n    }\r\n    /**\r\n     * 绑定开始游戏事件工具\r\n     * @param {string} id\r\n     */\r\n    bindStart(id) {\r\n        $('#' + id).on('click', () => {\r\n            $('#' + id).addClass('disabled');\r\n            //TODO 点击准备按钮发送准备\r\n            this._game.start = true;\r\n        });\r\n    }\r\n    ;\r\n}\r\nexports.default = Local;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/ts/core/local.ts","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n/**\r\n * 传入二维数组生成 div dom\r\n */\r\nclass SquareFactory {\r\n    constructor(matrix, $contain) {\r\n        this._matrix = matrix;\r\n        this._contain = $contain;\r\n    }\r\n    /**\r\n     * 生成方块dom\r\n     */\r\n    build() {\r\n        this._matrix.forEach((row, rowIndex) => {\r\n            const rowDiv = $('<div></div>');\r\n            row.forEach((col, colIndex) => {\r\n                const colDiv = $('<div></div>');\r\n                colDiv.addClass('square');\r\n                colDiv.css({ left: colIndex * 30 + 'px', top: rowIndex * 30 + 'px' });\r\n                if (col === 0) {\r\n                    colDiv.addClass('none').removeClass('current').removeClass('done');\r\n                }\r\n                else if (col == 1) {\r\n                    colDiv.addClass('current').removeClass('none').removeClass('done');\r\n                }\r\n                else {\r\n                    colDiv.addClass('done').removeClass('none').removeClass('current');\r\n                }\r\n                rowDiv.append(colDiv);\r\n            });\r\n            this._contain.append(rowDiv);\r\n        });\r\n    }\r\n    /**\r\n     * 刷新方块\r\n     */\r\n    refresh(matrix) {\r\n        matrix.forEach((row, rowIndex) => {\r\n            row.forEach((col, colIndex) => {\r\n                const div = this._contain.find(`div:nth-child(${rowIndex + 1})`).find(`div:nth-child(${colIndex + 1})`);\r\n                if (col === 0) {\r\n                    div.addClass('none').removeClass('current').removeClass('done');\r\n                }\r\n                else if (col == 1) {\r\n                    div.addClass('current').removeClass('none').removeClass('done');\r\n                }\r\n                else {\r\n                    div.addClass('done').removeClass('none').removeClass('current');\r\n                }\r\n            });\r\n        });\r\n    }\r\n}\r\nexports.SquareFactory = SquareFactory;\r\nexports.default = SquareFactory;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/ts/ui/squareFactory.ts","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n/**\r\n * 当前方块解决方案\r\n */\r\nconst toolkit_1 = require(\"../core/toolkit\");\r\nclass Square {\r\n    constructor() {\r\n        this._x = 2;\r\n        this._y = 0;\r\n        this._matrix = this.createMatrix();\r\n        this._nextMatrix = this.createMatrix();\r\n    }\r\n    get x() {\r\n        return this._x;\r\n    }\r\n    get y() {\r\n        return this._y;\r\n    }\r\n    get w() {\r\n        return this._matrix.w;\r\n    }\r\n    get h() {\r\n        return this._matrix.h;\r\n    }\r\n    get matrix() {\r\n        return this._matrix.matrix;\r\n    }\r\n    get matrixObj() {\r\n        return this._matrix;\r\n    }\r\n    get nextMatrix() {\r\n        return this._nextMatrix.matrix;\r\n    }\r\n    /**\r\n     * 是否可以左移状态修改接口\r\n     * @param {boolean} able\r\n     */\r\n    set leftWall(able) {\r\n        this._leftWall = able;\r\n    }\r\n    /**\r\n     * 是否可以右移状态修改接口\r\n     * @param {boolean} able\r\n     */\r\n    set rightWall(able) {\r\n        this._rightWall = able;\r\n    }\r\n    /**\r\n     * 下降\r\n     */\r\n    down() {\r\n        this._y++;\r\n    }\r\n    /**\r\n     * 旋转\r\n     */\r\n    turn(game) {\r\n        this._matrix = game.checkTurn();\r\n    }\r\n    /**\r\n     * 左移\r\n     */\r\n    left() {\r\n        if (!this._leftWall) {\r\n            this._x--;\r\n        }\r\n    }\r\n    /**\r\n     * 右移\r\n     */\r\n    right() {\r\n        if (!this._rightWall) {\r\n            this._x++;\r\n        }\r\n    }\r\n    /**\r\n     * 迅速落地\r\n     */\r\n    drop(game) {\r\n        while (game.checkDown()) {\r\n            this._y++;\r\n        }\r\n    }\r\n    /**\r\n     * 落地\r\n     */\r\n    done() {\r\n        this._x = 2;\r\n        this._y = 0;\r\n        this._matrix = this._nextMatrix;\r\n        this._nextMatrix = this.createMatrix();\r\n    }\r\n    /**\r\n     * 生成七种矩阵数据\r\n     */\r\n    createMatrix() {\r\n        const matrixes = [\r\n            {\r\n                matrix: [\r\n                    [1, 1, 1, 1],\r\n                    [0, 0, 0, 0],\r\n                    [0, 0, 0, 0],\r\n                    [0, 0, 0, 0]\r\n                ],\r\n                w: 4,\r\n                h: 1\r\n            },\r\n            {\r\n                matrix: [\r\n                    [1, 0, 0, 0],\r\n                    [1, 1, 1, 0],\r\n                    [0, 0, 0, 0],\r\n                    [0, 0, 0, 0]\r\n                ],\r\n                w: 3,\r\n                h: 2\r\n            },\r\n            {\r\n                matrix: [\r\n                    [0, 0, 1, 0],\r\n                    [1, 1, 1, 0],\r\n                    [0, 0, 0, 0],\r\n                    [0, 0, 0, 0]\r\n                ],\r\n                w: 3,\r\n                h: 2\r\n            },\r\n            {\r\n                matrix: [\r\n                    [1, 1, 0, 0],\r\n                    [1, 1, 0, 0],\r\n                    [0, 0, 0, 0],\r\n                    [0, 0, 0, 0]\r\n                ],\r\n                w: 2,\r\n                h: 2\r\n            },\r\n            {\r\n                matrix: [\r\n                    [0, 1, 1, 0],\r\n                    [1, 1, 0, 0],\r\n                    [0, 0, 0, 0],\r\n                    [0, 0, 0, 0]\r\n                ],\r\n                w: 3,\r\n                h: 2\r\n            },\r\n            {\r\n                matrix: [\r\n                    [0, 1, 0, 0],\r\n                    [1, 1, 1, 0],\r\n                    [0, 0, 0, 0],\r\n                    [0, 0, 0, 0]\r\n                ],\r\n                w: 3,\r\n                h: 2\r\n            },\r\n            {\r\n                matrix: [\r\n                    [1, 1, 0, 0],\r\n                    [0, 1, 1, 0],\r\n                    [0, 0, 0, 0],\r\n                    [0, 0, 0, 0]\r\n                ],\r\n                w: 3,\r\n                h: 2\r\n            },\r\n        ];\r\n        let matrix = matrixes[Math.floor(Math.random() * 7)];\r\n        if (Math.random() > 0.5) {\r\n            matrix = toolkit_1.default.matrix.turnMatrix(matrix);\r\n        }\r\n        return matrix;\r\n        // return matrixes[3];\r\n    }\r\n}\r\nexports.default = Square;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/ts/core/square.ts","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst game_1 = require(\"../ui/game\");\r\nclass Local {\r\n    constructor() {\r\n        const game = new game_1.default('remote');\r\n        game.init();\r\n    }\r\n}\r\nexports.default = Local;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/ts/core/remote.ts"],"sourceRoot":""}