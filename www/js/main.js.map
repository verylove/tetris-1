{"version":3,"sources":["webpack:///webpack/bootstrap 6ca140f6ae9684278659","webpack:///./src/ts/ui/game.ts","webpack:///./src/ts/core/toolkit.ts","webpack:///./src/ts/main.ts","webpack:///./src/ts/core/local.ts","webpack:///./src/ts/ui/squareFactory.ts","webpack:///./src/ts/core/square.ts","webpack:///./src/ts/core/remote.ts"],"names":["Object","defineProperty","exports","value","squareFactory_1","require","toolkit_1","square_1","Game","user","_user","_speed","_score","_start","_gameOver","_win","_lose","$","text","_gameMatrix","default","matrix","makeMatrix","_nextMatrix","_currentSquare","nextMatrix","build","refreshGame","gameMatrix","status","left","right","leftWall","rightWall","forEach","rV","rI","cV","cI","checkDown","y","x","checkClear","refresh","done","refreshNext","_gameSquare","_nextSquare","val","result","next","turnMatrix","matrixObj","has_done","score_count","done_count","count","splice","unshift","makeRow","onWin","onLose","show","shift","arr","Array","from","length","Math","random","push","console","log","setInterval","down","bool","Toolkit","MatrixToolkit","v","l","fill","l1","l2","_matrix","w","h","map","local_1","remote_1","local","remote","time","floor","game","lose","socket","emit","win","on","data","game_1","Local","_game","init","loop","bindEvent","_socket","io","hide","remoteName","start","gameover","document","e","keyCode","currentSquare","turn","drop","bindStart","name","id","addClass","SquareFactory","$contain","_contain","row","rowIndex","rowDiv","col","colIndex","colDiv","css","top","removeClass","append","div","find","Square","_x","_y","createMatrix","checkTurn","_leftWall","_rightWall","matrixes","able","Remote"],"mappings":"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","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 2);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 6ca140f6ae9684278659","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst squareFactory_1 = require(\"./squareFactory\");\r\nconst toolkit_1 = require(\"../core/toolkit\");\r\nconst square_1 = require(\"../core/square\");\r\n/**\r\n * 生成游戏解决方案\r\n */\r\nclass Game {\r\n    constructor(user) {\r\n        this._user = user;\r\n        this._speed = 1000;\r\n    }\r\n    get currentSquare() {\r\n        return this._currentSquare;\r\n    }\r\n    get gameover() {\r\n        return this._gameOver;\r\n    }\r\n    set gameover(bool) {\r\n        this._gameOver = bool;\r\n    }\r\n    set start(bool) {\r\n        this._start = bool;\r\n    }\r\n    get win() {\r\n        return this._win;\r\n    }\r\n    get lose() {\r\n        return this._lose;\r\n    }\r\n    get gameMatrix() {\r\n        return this._gameMatrix;\r\n    }\r\n    get nextMatrix() {\r\n        return this._nextMatrix;\r\n    }\r\n    /**\r\n     * 初始化游戏\r\n     */\r\n    init() {\r\n        this._score = 0;\r\n        this._start = false;\r\n        this._gameOver = false;\r\n        this._win = false;\r\n        this._lose = false;\r\n        $('#score-' + this._user).text(this._score);\r\n        this._gameMatrix = toolkit_1.default.matrix.makeMatrix(0, 10, 20);\r\n        this._nextMatrix = toolkit_1.default.matrix.makeMatrix(1, 4, 4);\r\n        this._currentSquare = new square_1.default();\r\n        this._nextMatrix = this._currentSquare.nextMatrix;\r\n        this.build();\r\n        this.refreshGame();\r\n    }\r\n    /**\r\n     * 刷新主体\r\n     */\r\n    refreshGame(gameMatrix = toolkit_1.default.matrix.makeMatrix(0, 10, 20), nextMatrix = toolkit_1.default.matrix.makeMatrix(1, 4, 4)) {\r\n        if (this._user === 'local') {\r\n            let status = 1;\r\n            let left = 3; //方块最左侧位置\r\n            let right = 0; //方块最右侧位置\r\n            this._currentSquare.leftWall = false;\r\n            this._currentSquare.rightWall = false;\r\n            //重置面板\r\n            this._gameMatrix.forEach((rV, rI) => rV.forEach((cV, cI) => {\r\n                if (cV === 1) {\r\n                    this._gameMatrix[rI][cI] = 0;\r\n                }\r\n            }));\r\n            if (!this.checkDown()) {\r\n                status = 2;\r\n            }\r\n            //渲染方块所在位置\r\n            this._currentSquare.matrix.forEach((rV, rI) => {\r\n                rV.forEach((cV, cI) => {\r\n                    if (cV) {\r\n                        if (this._gameMatrix[this._currentSquare.y + rI]) {\r\n                            this._gameMatrix[this._currentSquare.y + rI][this._currentSquare.x + cI] = status;\r\n                        }\r\n                        right = cI > right ? cI : right;\r\n                        left = cI < left ? cI : left;\r\n                        //监测是否出界\r\n                        if ((this._gameMatrix[this._currentSquare.y + rI] &&\r\n                            this._gameMatrix[this._currentSquare.y + rI][this._currentSquare.x + cI - 1] &&\r\n                            this._gameMatrix[this._currentSquare.y + rI][this._currentSquare.x + cI - 1] === 2) ||\r\n                            this._currentSquare.x + left <= 0) {\r\n                            this._currentSquare.leftWall = true;\r\n                        }\r\n                        if ((this._gameMatrix[this._currentSquare.y + rI] &&\r\n                            this._gameMatrix[this._currentSquare.y + rI][this._currentSquare.x + cI + 1] &&\r\n                            this._gameMatrix[this._currentSquare.y + rI][this._currentSquare.x + cI + 1] === 2) ||\r\n                            this._currentSquare.x + right >= 9) {\r\n                            this._currentSquare.rightWall = true;\r\n                        }\r\n                    }\r\n                });\r\n            });\r\n            this.checkClear();\r\n            this.refresh(1);\r\n            if (status === 2) {\r\n                this._currentSquare.done();\r\n                this.refreshNext(this._currentSquare.nextMatrix);\r\n            }\r\n        }\r\n        else {\r\n            this._gameMatrix = gameMatrix;\r\n            this.refresh(1);\r\n            this._nextMatrix = nextMatrix;\r\n            this.refresh(2);\r\n        }\r\n    }\r\n    /**\r\n     * 刷新预览\r\n     * @param {number[][]} nextMatrix\r\n     */\r\n    refreshNext(nextMatrix) {\r\n        this._nextMatrix = nextMatrix;\r\n        this.refresh(2);\r\n    }\r\n    /**\r\n     * 生成dom\r\n     */\r\n    build() {\r\n        this._gameSquare = new squareFactory_1.default(this._gameMatrix, $('#panel-' + this._user));\r\n        this._gameSquare.build();\r\n        this._nextSquare = new squareFactory_1.default(this._nextMatrix, $('#next-' + this._user));\r\n        this._nextSquare.build();\r\n    }\r\n    /**\r\n     * 刷新dom\r\n     * @param {number} val\r\n     */\r\n    refresh(val) {\r\n        if (val === 1) {\r\n            this._gameSquare.refresh(this._gameMatrix);\r\n        }\r\n        else {\r\n            this._nextSquare.refresh(this._nextMatrix);\r\n        }\r\n    }\r\n    /**\r\n     * 检测是否可以下降\r\n     * @returns {boolean}\r\n     */\r\n    checkDown() {\r\n        //判断下一行是否到底或者有方块\r\n        let result = true;\r\n        this._currentSquare.matrix.forEach((rV, rI) => {\r\n            rV.forEach((cV, cI) => {\r\n                if (!!cV) {\r\n                    const next = this._gameMatrix[this._currentSquare.y + rI + 1] ? this._gameMatrix[this._currentSquare.y + rI + 1][this._currentSquare.x + cI] : -1;\r\n                    if (next === 2 || next === -1) {\r\n                        result = false;\r\n                    }\r\n                }\r\n            });\r\n        });\r\n        return result;\r\n    }\r\n    /**\r\n     * 检测是否可以旋转\r\n     * @returns {boolean}\r\n     */\r\n    checkTurn() {\r\n        const matrix = toolkit_1.default.matrix.turnMatrix(this._currentSquare.matrixObj);\r\n        let left = 3; //方块最左侧位置\r\n        let right = 0; //方块最右侧位置\r\n        let has_done = false; //旁边是否有done\r\n        matrix.matrix.forEach((rV, rI) => {\r\n            rV.forEach((cV, cI) => {\r\n                if (cV) {\r\n                    right = cI > right ? cI : right;\r\n                    left = cI < left ? cI : left;\r\n                }\r\n                if (this._gameMatrix[this._currentSquare.y + rI] &&\r\n                    this._gameMatrix[this._currentSquare.y + rI][this._currentSquare.x + cI] &&\r\n                    this._gameMatrix[this._currentSquare.y + rI][this._currentSquare.x + cI] === 2) {\r\n                    has_done = true;\r\n                }\r\n            });\r\n        });\r\n        //根据是否可以旋转返回矩阵\r\n        if (this._currentSquare.x + left <= 0 || this._currentSquare.x + right >= 9 || has_done) {\r\n            return this._currentSquare.matrixObj;\r\n        }\r\n        else {\r\n            return matrix;\r\n        }\r\n    }\r\n    /**\r\n     *  检测消除\r\n     */\r\n    checkClear() {\r\n        let score_count = 0;\r\n        let done_count = 0;\r\n        this._gameMatrix.forEach((rV, rI) => {\r\n            let count = 0;\r\n            rV.forEach((cV, cI) => {\r\n                if (cV === 2) {\r\n                    count++;\r\n                }\r\n            });\r\n            if (count === 10) {\r\n                score_count++;\r\n                this._gameMatrix.splice(rI, 1);\r\n                this._gameMatrix.unshift(toolkit_1.default.matrix.makeRow(0, 10));\r\n            }\r\n            if (count >= 1) {\r\n                done_count++;\r\n            }\r\n        });\r\n        //判断得分\r\n        switch (score_count) {\r\n            case 1:\r\n                this._score += 10;\r\n                break;\r\n            case 2:\r\n                this._score += 30;\r\n                break;\r\n            case 3:\r\n                this._score += 60;\r\n                break;\r\n            case 4:\r\n                this._score += 100;\r\n                break;\r\n        }\r\n        if (this._score >= 2000) {\r\n            this.onWin();\r\n        }\r\n        //TODO 给对方加速\r\n        //判断游戏结束\r\n        if (done_count >= 19) {\r\n            this.onLose();\r\n        }\r\n        $('#score-' + this._user).text(this._score);\r\n    }\r\n    /**\r\n     * 失败\r\n     */\r\n    onLose() {\r\n        $(\"#lose\").show();\r\n        this._lose = true;\r\n        this._gameOver = true;\r\n    }\r\n    /**\r\n     * 胜利\r\n     */\r\n    onWin() {\r\n        $(\"#win\").show();\r\n        this._win = true;\r\n        this._gameOver = true;\r\n    }\r\n    /**\r\n     * 干扰\r\n     */\r\n    disturb() {\r\n        this._gameMatrix.shift();\r\n        const arr = Array.from({ length: 10 }, () => Math.random() > 0.5 ? 0 : 2);\r\n        this._gameMatrix.push(arr);\r\n        console.log(arr);\r\n    }\r\n    /**\r\n     * 循环游戏\r\n     */\r\n    loop() {\r\n        setInterval(() => {\r\n            if (!this._gameOver && this._start) {\r\n                this.refreshGame();\r\n                this._currentSquare.down();\r\n            }\r\n        }, this._speed);\r\n    }\r\n}\r\nexports.Game = Game;\r\nexports.default = Game;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/ts/ui/game.ts","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nclass Toolkit {\r\n    static get matrix() {\r\n        return MatrixToolkit;\r\n    }\r\n}\r\nexports.Toolkit = Toolkit;\r\n/**\r\n * 生成矩阵工具类\r\n * @type {{}}\r\n */\r\nconst MatrixToolkit = {\r\n    /**\r\n     * 生成一维数组工具\r\n     * @param {number} v  值\r\n     * @param {number} l  长度\r\n     * @returns {number[]}\r\n     */\r\n    makeRow(v = 0, l = 10) {\r\n        const arr = new Array(l);\r\n        arr.fill(v);\r\n        return arr;\r\n    },\r\n    /**\r\n     * 生成二位数组矩阵工具\r\n     * @param {number} v 值\r\n     * @param {number} l1 横向长度\r\n     * @param {number} l2 纵向长度\r\n     * @returns {number[][]}\r\n     */\r\n    makeMatrix(v = 0, l1 = 10, l2 = 20) {\r\n        // const arr = new Array(l2);\r\n        // arr.map(value => this.makeRow(v,l1));\r\n        const arr = Array.from({ length: l2 }, () => this.makeRow(v, l1));\r\n        return arr;\r\n    },\r\n    /**\r\n     * 矩阵顺时针旋转90°解决方案\r\n     * @param {number[][]} matrix\r\n     * @returns {number[][]}\r\n     */\r\n    turnMatrix(matrix) {\r\n        let _matrix = {\r\n            matrix: this.makeMatrix(0, 4, 4),\r\n            w: 0,\r\n            h: 0\r\n        };\r\n        _matrix.matrix = _matrix.matrix.map((rV, rI) => rV.map((cV, cI) => matrix.matrix[3 - cI][rI]));\r\n        _matrix.w = matrix.h;\r\n        _matrix.h = matrix.w;\r\n        return _matrix;\r\n    }\r\n};\r\nexports.default = Toolkit;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/ts/core/toolkit.ts","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst local_1 = require(\"./core/local\");\r\nconst remote_1 = require(\"./core/remote\");\r\nconst local = new local_1.default();\r\nconst remote = new remote_1.default();\r\nlet time = 0;\r\nsetInterval(() => {\r\n    time += 0.1;\r\n    $('#m').text(Math.floor(time / 60) < 10 ? '0' + Math.floor(time / 60) : Math.floor(time / 60));\r\n    $('#s').text(time % 60 < 10 ? '0' + Math.floor(time % 60) : Math.floor(time % 60));\r\n    // if(time % 3 === 0) {\r\n    //     local.game.disturb();\r\n    // }\r\n    if (local.game.lose) {\r\n        local.socket.emit('lose');\r\n    }\r\n    if (local.game.win) {\r\n        local.socket.emit('win');\r\n    }\r\n    local.socket.emit('playing', { game: local.game.gameMatrix, next: local.game.nextMatrix });\r\n    local.socket.on('playing', (data) => {\r\n        remote.game.refreshGame(data.game, data.next);\r\n    });\r\n}, 1000);\r\n$('#panel-name').show();\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/ts/main.ts","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst game_1 = require(\"../ui/game\");\r\nclass Local {\r\n    constructor() {\r\n        this._game = new game_1.default('local');\r\n        this._game.init();\r\n        this._game.loop();\r\n        this.bindEvent();\r\n        this._socket = io('http://localhost:3000');\r\n        this._socket.on('start', (data) => {\r\n            $('#prepare').hide();\r\n            $('#win').hide();\r\n            $('#lose').hide();\r\n            $('#name-remote').text(data.remoteName);\r\n            this._game.start = true;\r\n            this._game.gameover = false;\r\n        });\r\n        this._socket.on('win', () => {\r\n            this._game.onWin();\r\n        });\r\n        this._socket.on('lose', () => {\r\n            this._game.onLose();\r\n        });\r\n    }\r\n    get game() {\r\n        return this._game;\r\n    }\r\n    get socket() {\r\n        return this._socket;\r\n    }\r\n    /**\r\n     * 绑定键盘事件\r\n     */\r\n    bindEvent() {\r\n        $(document).on('keydown', e => {\r\n            if (this._game.gameover) {\r\n                return;\r\n            }\r\n            if (e.keyCode === 38) {\r\n                this._game.currentSquare.turn(this._game);\r\n            }\r\n            else if (e.keyCode === 37) {\r\n                this._game.currentSquare.left();\r\n            }\r\n            else if (e.keyCode === 39) {\r\n                this._game.currentSquare.right();\r\n            }\r\n            else if (e.keyCode === 40) {\r\n                this._game.currentSquare.down();\r\n            }\r\n            else if (e.keyCode === 32) {\r\n                this._game.currentSquare.drop(this._game);\r\n            }\r\n            this._game.refreshGame();\r\n        });\r\n        this.bindStart('start');\r\n        this.bindStart('win-again');\r\n        this.bindStart('lose-again');\r\n        $('#btn-name').on('click', () => {\r\n            const name = $('#ipt-name').val();\r\n            if (!!name) {\r\n                $('#name-local').text(name);\r\n            }\r\n            this._socket.emit('nickname', { name: name });\r\n            $('#panel-name').hide();\r\n            $('#prepare').show();\r\n        });\r\n    }\r\n    /**\r\n     * 绑定开始游戏事件工具\r\n     * @param {string} id\r\n     */\r\n    bindStart(id) {\r\n        $('#' + id).on('click', () => {\r\n            $('#' + id).addClass('disabled');\r\n            $('#' + id).text('等待对手确认...');\r\n            //TODO 点击准备按钮发送准备\r\n            this._socket.emit('start', {});\r\n        });\r\n    }\r\n    ;\r\n}\r\nexports.default = Local;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/ts/core/local.ts","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n/**\r\n * 传入二维数组生成 div dom\r\n */\r\nclass SquareFactory {\r\n    constructor(matrix, $contain) {\r\n        this._matrix = matrix;\r\n        this._contain = $contain;\r\n    }\r\n    /**\r\n     * 生成方块dom\r\n     */\r\n    build() {\r\n        this._matrix.forEach((row, rowIndex) => {\r\n            const rowDiv = $('<div></div>');\r\n            row.forEach((col, colIndex) => {\r\n                const colDiv = $('<div></div>');\r\n                colDiv.addClass('square');\r\n                colDiv.css({ left: colIndex * 30 + 'px', top: rowIndex * 30 + 'px' });\r\n                if (col === 0) {\r\n                    colDiv.addClass('none').removeClass('current').removeClass('done');\r\n                }\r\n                else if (col == 1) {\r\n                    colDiv.addClass('current').removeClass('none').removeClass('done');\r\n                }\r\n                else {\r\n                    colDiv.addClass('done').removeClass('none').removeClass('current');\r\n                }\r\n                rowDiv.append(colDiv);\r\n            });\r\n            this._contain.append(rowDiv);\r\n        });\r\n    }\r\n    /**\r\n     * 刷新方块\r\n     */\r\n    refresh(matrix) {\r\n        matrix.forEach((row, rowIndex) => {\r\n            row.forEach((col, colIndex) => {\r\n                const div = this._contain.find(`div:nth-child(${rowIndex + 1})`).find(`div:nth-child(${colIndex + 1})`);\r\n                if (col === 0) {\r\n                    div.addClass('none').removeClass('current').removeClass('done');\r\n                }\r\n                else if (col == 1) {\r\n                    div.addClass('current').removeClass('none').removeClass('done');\r\n                }\r\n                else {\r\n                    div.addClass('done').removeClass('none').removeClass('current');\r\n                }\r\n            });\r\n        });\r\n    }\r\n}\r\nexports.SquareFactory = SquareFactory;\r\nexports.default = SquareFactory;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/ts/ui/squareFactory.ts","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n/**\r\n * 当前方块解决方案\r\n */\r\nconst toolkit_1 = require(\"../core/toolkit\");\r\nclass Square {\r\n    constructor() {\r\n        this._x = 2;\r\n        this._y = 0;\r\n        this._matrix = this.createMatrix();\r\n        this._nextMatrix = this.createMatrix();\r\n    }\r\n    get x() {\r\n        return this._x;\r\n    }\r\n    get y() {\r\n        return this._y;\r\n    }\r\n    get w() {\r\n        return this._matrix.w;\r\n    }\r\n    get h() {\r\n        return this._matrix.h;\r\n    }\r\n    get matrix() {\r\n        return this._matrix.matrix;\r\n    }\r\n    get matrixObj() {\r\n        return this._matrix;\r\n    }\r\n    get nextMatrix() {\r\n        return this._nextMatrix.matrix;\r\n    }\r\n    /**\r\n     * 是否可以左移状态修改接口\r\n     * @param {boolean} able\r\n     */\r\n    set leftWall(able) {\r\n        this._leftWall = able;\r\n    }\r\n    /**\r\n     * 是否可以右移状态修改接口\r\n     * @param {boolean} able\r\n     */\r\n    set rightWall(able) {\r\n        this._rightWall = able;\r\n    }\r\n    /**\r\n     * 下降\r\n     */\r\n    down() {\r\n        this._y++;\r\n    }\r\n    /**\r\n     * 旋转\r\n     */\r\n    turn(game) {\r\n        this._matrix = game.checkTurn();\r\n    }\r\n    /**\r\n     * 左移\r\n     */\r\n    left() {\r\n        if (!this._leftWall) {\r\n            this._x--;\r\n        }\r\n    }\r\n    /**\r\n     * 右移\r\n     */\r\n    right() {\r\n        if (!this._rightWall) {\r\n            this._x++;\r\n        }\r\n    }\r\n    /**\r\n     * 迅速落地\r\n     */\r\n    drop(game) {\r\n        while (game.checkDown()) {\r\n            this._y++;\r\n        }\r\n    }\r\n    /**\r\n     * 落地\r\n     */\r\n    done() {\r\n        this._x = 2;\r\n        this._y = 0;\r\n        this._matrix = this._nextMatrix;\r\n        this._nextMatrix = this.createMatrix();\r\n    }\r\n    /**\r\n     * 生成七种矩阵数据\r\n     */\r\n    createMatrix() {\r\n        const matrixes = [\r\n            {\r\n                matrix: [\r\n                    [1, 1, 1, 1],\r\n                    [0, 0, 0, 0],\r\n                    [0, 0, 0, 0],\r\n                    [0, 0, 0, 0]\r\n                ],\r\n                w: 4,\r\n                h: 1\r\n            },\r\n            {\r\n                matrix: [\r\n                    [1, 0, 0, 0],\r\n                    [1, 1, 1, 0],\r\n                    [0, 0, 0, 0],\r\n                    [0, 0, 0, 0]\r\n                ],\r\n                w: 3,\r\n                h: 2\r\n            },\r\n            {\r\n                matrix: [\r\n                    [0, 0, 1, 0],\r\n                    [1, 1, 1, 0],\r\n                    [0, 0, 0, 0],\r\n                    [0, 0, 0, 0]\r\n                ],\r\n                w: 3,\r\n                h: 2\r\n            },\r\n            {\r\n                matrix: [\r\n                    [1, 1, 0, 0],\r\n                    [1, 1, 0, 0],\r\n                    [0, 0, 0, 0],\r\n                    [0, 0, 0, 0]\r\n                ],\r\n                w: 2,\r\n                h: 2\r\n            },\r\n            {\r\n                matrix: [\r\n                    [0, 1, 1, 0],\r\n                    [1, 1, 0, 0],\r\n                    [0, 0, 0, 0],\r\n                    [0, 0, 0, 0]\r\n                ],\r\n                w: 3,\r\n                h: 2\r\n            },\r\n            {\r\n                matrix: [\r\n                    [0, 1, 0, 0],\r\n                    [1, 1, 1, 0],\r\n                    [0, 0, 0, 0],\r\n                    [0, 0, 0, 0]\r\n                ],\r\n                w: 3,\r\n                h: 2\r\n            },\r\n            {\r\n                matrix: [\r\n                    [1, 1, 0, 0],\r\n                    [0, 1, 1, 0],\r\n                    [0, 0, 0, 0],\r\n                    [0, 0, 0, 0]\r\n                ],\r\n                w: 3,\r\n                h: 2\r\n            },\r\n        ];\r\n        let matrix = matrixes[Math.floor(Math.random() * 7)];\r\n        if (Math.random() > 0.5) {\r\n            matrix = toolkit_1.default.matrix.turnMatrix(matrix);\r\n        }\r\n        return matrix;\r\n        // return matrixes[3];\r\n    }\r\n}\r\nexports.default = Square;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/ts/core/square.ts","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst game_1 = require(\"../ui/game\");\r\nclass Remote {\r\n    constructor() {\r\n        this._game = new game_1.default('remote');\r\n        this._game.init();\r\n    }\r\n    get game() {\r\n        return this._game;\r\n    }\r\n}\r\nexports.default = Remote;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/ts/core/remote.ts"],"sourceRoot":""}