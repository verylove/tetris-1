{"version":3,"sources":["webpack:///webpack/bootstrap 2d5545eb823a80b06b37","webpack:///./src/ts/ui/game.ts","webpack:///./src/ts/main.ts","webpack:///./src/ts/core/local.ts","webpack:///./src/ts/ui/squareFactory.ts","webpack:///./src/ts/core/toolkit.ts","webpack:///./src/ts/ui/square.ts","webpack:///./src/ts/core/remote.ts"],"names":["Object","defineProperty","exports","value","squareFactory_1","require","toolkit_1","square_1","Game","user","_user","_speed","_gameMatrix","default","matrix","makeMatrix","_nextMatrix","_currentSquare","build","forEach","rV","rI","cV","cI","y","x","refresh","nextMatrix","_gameSquare","$","_nextSquare","val","setInterval","down","refreshGame","local_1","remote_1","local","remote","game_1","Local","game","init","loop","SquareFactory","$contain","_matrix","_contain","row","rowIndex","rowDiv","col","colIndex","colDiv","addClass","css","left","top","removeClass","append","console","log","div","find","Toolkit","MatrixToolkit","makeRow","v","l","arr","Array","fill","l1","l2","from","length","Square"],"mappings":"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","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 2d5545eb823a80b06b37","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst squareFactory_1 = require(\"./squareFactory\");\r\nconst toolkit_1 = require(\"../core/toolkit\");\r\nconst square_1 = require(\"./square\");\r\n/**\r\n * 生成游戏面板\r\n */\r\nclass Game {\r\n    constructor(user) {\r\n        this._user = user;\r\n        this._speed = 3000;\r\n    }\r\n    /**\r\n     * 初始化游戏\r\n     */\r\n    init() {\r\n        this._gameMatrix = toolkit_1.default.matrix.makeMatrix(0, 10, 20);\r\n        this._nextMatrix = toolkit_1.default.matrix.makeMatrix(1, 4, 4);\r\n        this._currentSquare = new square_1.default(this._nextMatrix);\r\n        this.build();\r\n    }\r\n    /**\r\n     * 刷新主体\r\n     */\r\n    refreshGame() {\r\n        this._gameMatrix = toolkit_1.default.matrix.makeMatrix(0, 10, 20);\r\n        this._currentSquare.matrix.forEach((rV, rI) => {\r\n            rV.forEach((cV, cI) => {\r\n                this._gameMatrix[this._currentSquare.y + rI][this._currentSquare.x + cI] = cV;\r\n            });\r\n        });\r\n        this.refresh(1);\r\n    }\r\n    /**\r\n     * 刷新预览\r\n     * @param {number[][]} nextMatrix\r\n     */\r\n    refreshNext(nextMatrix) {\r\n        this._nextMatrix = nextMatrix;\r\n        this.refresh(2);\r\n    }\r\n    /**\r\n     * 生成dom\r\n     */\r\n    build() {\r\n        this._gameSquare = new squareFactory_1.default(this._gameMatrix, $('#panel-' + this._user));\r\n        this._gameSquare.build();\r\n        this._nextSquare = new squareFactory_1.default(this._nextMatrix, $('#next-' + this._user));\r\n        this._nextSquare.build();\r\n    }\r\n    refresh(val) {\r\n        if (val === 1) {\r\n            this._gameSquare.refresh(this._gameMatrix);\r\n        }\r\n        else {\r\n            this._nextSquare.refresh(this._nextMatrix);\r\n        }\r\n    }\r\n    /**\r\n     * 循环游戏\r\n     */\r\n    loop() {\r\n        setInterval(() => {\r\n            this._currentSquare.down();\r\n            this.refreshGame();\r\n        }, this._speed);\r\n    }\r\n}\r\nexports.Game = Game;\r\nexports.default = Game;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/ts/ui/game.ts","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst local_1 = require(\"./core/local\");\r\nconst remote_1 = require(\"./core/remote\");\r\nconst local = new local_1.default();\r\nconst remote = new remote_1.default();\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/ts/main.ts","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst game_1 = require(\"../ui/game\");\r\nclass Local {\r\n    constructor() {\r\n        const game = new game_1.default('local');\r\n        game.init();\r\n        game.loop();\r\n    }\r\n}\r\nexports.default = Local;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/ts/core/local.ts","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n/**\r\n * 传入二维数组生成 div dom\r\n */\r\nclass SquareFactory {\r\n    constructor(matrix, $contain) {\r\n        this._matrix = matrix;\r\n        this._contain = $contain;\r\n    }\r\n    /**\r\n     * 生成方块dom\r\n     */\r\n    build() {\r\n        this._matrix.forEach((row, rowIndex) => {\r\n            const rowDiv = $('<div></div>');\r\n            row.forEach((col, colIndex) => {\r\n                const colDiv = $('<div></div>');\r\n                colDiv.addClass('square');\r\n                colDiv.css({ left: colIndex * 30 + 'px', top: rowIndex * 30 + 'px' });\r\n                if (col === 0) {\r\n                    colDiv.addClass('none').removeClass('current').removeClass('done');\r\n                }\r\n                else if (col == 1) {\r\n                    colDiv.addClass('current').removeClass('none').removeClass('done');\r\n                }\r\n                else {\r\n                    colDiv.addClass('done').removeClass('none').removeClass('current');\r\n                }\r\n                rowDiv.append(colDiv);\r\n            });\r\n            this._contain.append(rowDiv);\r\n        });\r\n    }\r\n    /**\r\n     * 刷新方块\r\n     */\r\n    refresh(matrix) {\r\n        console.log(matrix);\r\n        matrix.forEach((row, rowIndex) => {\r\n            row.forEach((col, colIndex) => {\r\n                const div = this._contain.find(`div:nth-child(${rowIndex + 1})`).find(`div:nth-child(${colIndex + 1})`);\r\n                if (col === 0) {\r\n                    div.addClass('none').removeClass('current').removeClass('done');\r\n                }\r\n                else if (col == 1) {\r\n                    div.addClass('current').removeClass('none').removeClass('done');\r\n                }\r\n                else {\r\n                    div.addClass('done').removeClass('none').removeClass('current');\r\n                }\r\n            });\r\n        });\r\n    }\r\n}\r\nexports.SquareFactory = SquareFactory;\r\nexports.default = SquareFactory;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/ts/ui/squareFactory.ts","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nclass Toolkit {\r\n    static get matrix() {\r\n        return MatrixToolkit;\r\n    }\r\n}\r\nexports.Toolkit = Toolkit;\r\n/**\r\n * 生成矩阵工具类\r\n * @type {{}}\r\n */\r\nconst MatrixToolkit = {\r\n    /**\r\n     * 生成一维数组工具\r\n     * @param {number} v  值\r\n     * @param {number} l  长度\r\n     * @returns {number[]}\r\n     */\r\n    makeRow(v = 0, l = 10) {\r\n        const arr = new Array(l);\r\n        arr.fill(v);\r\n        return arr;\r\n    },\r\n    /**\r\n     * 生成二位数组矩阵工具\r\n     * @param {number} v 值\r\n     * @param {number} l1 横向长度\r\n     * @param {number} l2 纵向长度\r\n     * @returns {number[][]}\r\n     */\r\n    makeMatrix(v = 0, l1 = 10, l2 = 20) {\r\n        // const arr = new Array(l2);\r\n        // arr.map(value => this.makeRow(v,l1));\r\n        const arr = Array.from({ length: l2 }, () => this.makeRow(v, l1));\r\n        return arr;\r\n    }\r\n};\r\nexports.default = Toolkit;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/ts/core/toolkit.ts","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nclass Square {\r\n    constructor(matrix) {\r\n        this.x = 2;\r\n        this.y = 0;\r\n        this.matrix = matrix;\r\n    }\r\n    /**\r\n     * 下降\r\n     * @param {number[][]} matrix\r\n     */\r\n    down() {\r\n        this.y++;\r\n    }\r\n}\r\nexports.default = Square;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/ts/ui/square.ts","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst game_1 = require(\"../ui/game\");\r\nclass Local {\r\n    constructor() {\r\n        const game = new game_1.default('remote');\r\n        game.init();\r\n    }\r\n}\r\nexports.default = Local;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/ts/core/remote.ts"],"sourceRoot":""}